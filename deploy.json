{
  "defaultStacks": ["flexible"],
  "packages": {
    "restorer2" : {
      "type": "autoscaling",
      "data": {
        "bucket": "composer-dist",
        "publicReadAcl": false
      }
    },
    "ami-update": {
      "type": "ami-cloudformation-parameter",
      "data": {
          "cloudFormationStackName": "Flexible-Restorer",
          "prependStackToCloudFormationStackName": false,
          "amiParameter": "AMI",
          "amiTags": {
              "ImageName": "ubuntu-wily-java8",
              "Branch": "master"
          }
      }
    }
  },
  "recipes": {
    "default": {
      "depends": ["ami-update", "artifactUploadOnly", "deployOnly"]
    },

    "deployOnly": {
      "actionsBeforeApp": ["restorer2.deploy"]
    },

    "artifactUploadOnly": {
      "actionsBeforeApp": ["restorer2.uploadArtifacts"]
    },

    "ami-update": {
      "actions": ["ami-update.update"]
    }
  }
}
